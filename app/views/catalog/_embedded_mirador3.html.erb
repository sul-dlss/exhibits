<%# external IIIF manifest viewer %>
<% if document.manifest_url.present? %>
  <% manifest_url = document.manifest_url.starts_with?('/') ? root_url + document.manifest_url.slice(1..-1) : document.manifest_url %>
  <%= content_tag :iframe, '',
        # workspace_state here works in external viewer
        src: "#{Settings.iiif_embed.url}?#{{ url: manifest_url, workspace_state: 'embedded' }.to_query}",
        allowfullscreen: true,
        class: 'mirador-embed-wrapper',
        frameborder: 0,
        marginwidth: 0,
        marginheight: 0,
        scrolling: 'no',
        width: '100%',
        id: 'embedded-test'
        %>
  <%= iiif_drag_n_drop(manifest_url) %>
<% end %>
